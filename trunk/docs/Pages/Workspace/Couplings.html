<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
    <title>Simbrain Documentation</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <link href="../../Styles.css" rel="stylesheet" type="text/css">
</head>

<body>
    <a href="../../SimbrainDocs.html">
        <div class="logo">
            <p><span></span>
            </p>
        </div>
    </a>
    <div id="main_docs">
        <div class="navi">
            <p><a href="../../SimbrainDocs.html">Simbrain</a> &gt; <a href="../Workspace.html">Workspace</a> &gt; Couplings</p>
        </div>
        <p>
        </p>
        <h1>Couplings</h1>
        <br>
        <p>A coupling represents a one-way informational link between two objects in a Simbrain simulation. In this way information can be made to flow from one component to another (e.g. from a network to a bar chart).  A coupling consists of a producer and a consumer.  Producers and consumers are <a href="#Attributes">attributes</a>. The basic way couplings work is simple.  A producer calls a getter method, and then passes the result to a setter method on the target consumer.   Couplings have different types, depending on what the datatype of the underlying getter and setter methods is. There are several types of couplings, including <p>
        <ul>
        	<li>Scalar couplings (doubles in the underlying code)</li>
        	<li>Vector couplings (double-arrays)</li>
        	<li>Text couplings (Strings)</li>
        </ul>
        <p>There could be other coupling types as well (the underlying code only requires that the producer and consumer in a coupling have the same data type).
        </p>
        <p>Couplings are managed using the <a href="#CouplingManager">Coupling Manager</a> or via various shortcuts described below in <a href="#Creation">Coupling Creation.</a></p>
        <p>To clarify how this works, we begin by describing scalar couplings</p>

        <p><span class="heading">Scalar Couplings</span>
        </p>
        <p>An easy way to start is with scalar couplings.  An example is shown below. In this example one of the couplings in the pursuer simulation is shown (the simulation has 5 couplings total, one for each neuron).  The coupling shown takes the current activation of the "turn right" neuron (the producer) and sends it to the turn right action on the mouse (the consumer).   The other "motor couplings" make the mouse turn left and go straight.  Several "sensor couplings" the current sensor values of the mouse and send them to the input neurons (which in this case are consumers). Note that in this example, the mouse will turn right when the workspace is updated, because there is more right turning activation than left turning activation.
        </p>
        <div style="text-align: center;"><img style="width: 500px" alt="Couplings Diagram" src="../../Images/ScalarCoupling.png">
        </div>
        <br>
        <p>There are many examples of scalar couplings that can be made: <ul>
        	<li>Single neuron to single neuron in another network.</li>
        	<li>Neuron activations to a bar in a bar chart.</li>
        	<li>Neuron activation to an agent's "motor" (turn left, turn right, go straight) </li>
        	<li>Neuron activation to text in a text world, e.g. when the neuron is active above .5 make the word "hello" appear in the text world</li>
        	<li>Agent sensor level to neuron (more precisely, one component of the vector associated with a sensor) </li>
        </ul></p>

        <p><span class="heading">Vector Couplings</span>
        </p>
        <p>The basic idea with vector couplings is the same, but they involve lists of numbers.  In the image shown below, we see that the producer is the whole neuron group (which is interfaced with via the interaction box), and the consumer is the whole histogram component.  The coupling takes an activation vector, consisting of the 9 activation values of the network, and sends it to the the histogram.  As can be seen, two neurons have activations below 0, three have activations betwen .5 and 1, three have activations of 2, and one has an activation above 2.
        </p>
        <div style="text-align: center;"><img style="width: 500px" alt="Couplings Diagram" src="../../Images/VectorCoupling.png">
        </div>
        <br>
        <p>Something similar can be done with ... (list examples)</p> 

        <p><span class="heading"><a name="Attributes"></a>Attributes</span>
        </p>
        
        <p>An attribute is any part of a component which has a value that may be sent to or recieved from another component, i.e. something that produces values or consumes values. Examples are neuron activations, weight strengths, or bars on a bar chart, or sensor values for an agent in a virtual world. A coupling is a pair that contains one producing attribute and one consuming attribute.
        </p>

        <p>Most windows in Simbrain (i.e. workspace <a href="Components.html">components)</a> are wrappers around other objects (e.g. neurons), whose values can be linked to one another. These values are <a href="#Attributes">attributes</a> and can (for instance) include such values as the activation of a given neuron in the workspace, or a value of a line on a time-series. Attributes can be thought of as the "hooks" or "anchor points" that make up couplings, and couplings represent the uni-directional data flow between these hooks. For example, a simulation might involve coupling neurons whose neurons are producers to a bar chart whose bars are consumers (to see this, try bar chart test in the script menu).</p>

        <p>Each attribute has a data type: numeric, String, etc. Currently only numeric data types are used. The data type is shown in terms of the relevant Java class or <a href="http://download.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html">primitive data type.</a> Currently most attributes in Simbrain are of type double, a kind of floating point number. Couplings can only occur between attributes which share the same data type.</p>
        <p>The attributes in a component can be viewed in the coupling manager dialog.
        </p>
        
        <p><a name ="CouplingManager"><span class="heading">Coupling Manager</a></span>
        </p>

        <p>To open the coupling manager press the coupling manager button
            <img style="width: 18px; height: 18px;" alt="coupling icon" src="../../Images/Coupling.png"> on the Simbrain <a href="Toolbar.html">toolbar</a> or use the menu<span class="command">Couplings &gt; Coupling Manager</span>. The coupling manager allows you to create and delete couplings , set attribute visibility, and view workspace attributes. The coupling manager is organized in to three columns. Multiple items in each column can be selected by holding the shift key while selecting items or ranges of items.
            <br>
        </p>
        <p style="margin-left: 40px;"><span class="heading2">Producer / Consumer lists</span>: these are the columns on the left and right side of the coupling manager: producers on the left; consumers on the right. Intuitively you are connecting a consumer to a producer to produce a coupling, which is displayed in the middle. The drop down box at the top of each column shows all current workspace components. Selecting that component shows what producing or consuming attributes are currently visible in that component.</p>
        <p style="margin-left: 40px;"><span class="heading2"><a name="CouplingList">Coupling list</a></span>: this is the middle column of the coupling manager and it shows all current couplings in the workspace (not only some subset of couplings).
        </p>
        <p>The following commands are possible in the coupling manager:</p>
        <p style="margin-left: 40px;"><span class="heading2">Add coupling(s)</span>: This button creates new couplings, as follows. It begins with the first selected attribute in the producer list and the first selected attribute in the producer list, and then creates a coupling from those attributes. If multiple consumers and producers are selected it creates as many couplings as it can in this way. The default is to link each selected producer with one selected consumer, but if many-one is selected in the drop-down box next to the add coupling(s) button, then each selected consumer is coupled to all selected producers.
            <br>
        </p>
        <p style="margin-left: 40px;"><span class="heading2">Delete Couplings</span>: This button deletes all selected couplings from the coupling list.</p>
        <p style="margin-left: 40px;"><span class="heading2">Set Attribute Visibilities</span>: This button opens up the <a href="#visibility">attribute visibility</a> dialog for the currently selected consumer or producer list.
            <br>
        </p>
        <br>
        <p style="text-align: center;"><img style="width: 534px; height: 312px;" src="../../Images/CouplingDialog.png">
        </p>
        </p>

        <p><span class="heading"><a name="visibility"></a>Attribute Visibility</span>
        </p>
        <p>Not all attributes are automatically "visible" in the relevant gui components (coupling manager, menus, etc. described below). The reason is that there are so many things that can be attributes (every numerical property of every neuron and synapse in a neural network, for example), that it would overwhelm the gui. Each component has some attributes visible by default. To modify what the visible attributes are, use the set attribute visibility dialog, accessible from the <span style="font-weight: bold;">coupling manager. </span>For example, in this dialog, we see available attributes for the currently selected network component. Only neuron activations are visible in this component. When clicking on the visibility checkboxes notice that attributes appear and disappear in the producer list window. <br>
        </p>
        <p style="text-align: center;">
            <img style="width: 433px; height: 154px;" alt="Attribute Visibility Dialog" src="../../Images/AttributeVisibilityDialog.png">
        </p>

        <p><span class="heading"><a name="Creation"></a>Coupling Creation</span>
            <br>
        </p>
        <p>There are at least 4 ways to create couplings.
            <br>
        </p>
        <p><b>1.</b> Use the <span style="font-weight: bold;">coupling manager,</span> as described in the discussion of the coupling manager above. An example is shown in the screenshot below. In that example, a coupling is created between the activation attribute of neuron 102 in network 1 (the producer), and one time series (one colored line, the consumer) in a time series plot. So activation of that neuron will be be plotted as time series when the simulation runs.
            <br>
        </p>
        <p>
            <br>
            <b>2.</b> Via <span style="font-weight: bold;">context menus</span> inside specific components (see below). This is for making one coupling at a time. E.g. if you right click on a neuron in a neural network a context menu will point you to all other potential consuming and producing attributes in the whole workspace. These context menus are built at the workspace menu by polling all current workspace components.</p>
        <p>
            <br>
        </p>
        <p style="text-align: center;"><img style="border: 1px solid ; width: 615px; height: 277px;" alt="coupling example" src="../../Images/EasyCoupling.png">
        </p>
        <br>
        <p>
            <br><b>3.</b> Via <span style="font-weight: bold;">"coupling" commands in some menus</span>. This can be used to create multiple couplings from one component to another, in one shot. Quick and easy! The source component is the one from which the menu command is called, and the target component is the one selected using that menu command. For example, in the screenshot below couplings are being made <span style="font-style: italic;">from</span> Network1 <span style="font-style: italic;">to</span> timeSeriesPlot1.
            <br>
        </p>
        <p>The way it works is that all visible producers in the source component (i.e. those that would be visible if the coupling manager were opened and that component were selected in the source list) and coupled 1-1 to visible consumers in the target component. The order of attributes is the same as appears in the producer and consumer lists. For example, in the screenshot below, the first five neuron activations are coupled to the available 5 time series in the time series plot.
            <br>
        </p>
        <p>Notice that in the screenshot the couplings tabs is open on the bottom of the workspace and that it shows the couplings that were made.
            <br>
        </p>
        <p>
            <br>
        </p>
        <p style="text-align: center;"><img style="border: 1px solid ; width: 638px; height: 518px;" alt="example" src="../../Images/QuickCoupling.png">
        </p>
        <br>
        <p><b>4.</b> Using a beanshell <span style="font-weight: bold;">script</span> one can directly code couplings. While efficient for more advanced users, scripts are generally speaking not a part of the simbrain GUI (with perhaps exception to their selection from a menu or any GUIs they might spawn). See the <a href="../Scripting.html">Scripting</a> page for more information.
            <br>
        </p>
    </div>
</body>

</html>